<!DOCTYPE html>
<html ng-app="app">
	<head>
		<title>Cart</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="/stylesheets/bootstrap.min.css" rel="stylesheet"/>
		<script src="/javascripts/jquery-1.11.2.min.js" type="text/javascript"></script>
		<script src="/javascripts/js.cookie-2.1.1.min.js" type="text/javascript"></script>
		<script src="/bower_components/angular/angular.js"></script>
		<script src="/bower_components/angular-bootstrap/ui-bootstrap.min.js"></script>
		<script src="/bower_components/bootstrap-toggle/js/bootstrap-toggle.min.js"></script>
		<script src="/javascripts/numpad.js" type="text/javascript"></script>
		<script src="/javascripts/includes.js" type="text/javascript"></script>
		<style>
			@media print
			{    
			    .no-print, .no-print *
			    {
			        display: none !important;
			    }
			}
			.pad{
				padding-left: 14px;
				padding-right: 0px;
			}
		</style>
	</head>
	<body ng-controller="bodyController">
		<div class="container text-center">
			<h2> S. S. S.</h2>
			<div class="row">
				<div class="pad col-xs-6 text-left">
						Bill No. 1231231231
				</div>
				<div class="col-xs-6 text-right">
						Date : 12/12/2013
				</div>
			</div>
			<div class="pad row text-left">
				<h4>Name : {{cart.cart.cust_name}}</h4>
			</div>
			<div class="pad row text-left">
				Address : {{cart.cart.cust_address}}
			</div>
			<table class="table">
    			<thead>
					<tr>
						<th>Category</th>
						<th>{{Karat}}</th>
						<th>{{grossWeight}}</th>
						<th>{{netWeight}}</th>
						<th>Rate</th>
						<th>Total</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="article in cart.cart.sales_articles">
						<td>
							{{article.category.name}}
						</td>
						<td>
							{{article.karat}}
						</td>
						<td>
							{{article.grossWeight}}
						</td>
						<td>
							{{article.netWeight}}
						</td>
						<td>
							{{(article.metal=="Gold")?cart.gold_rate:cart.silver_rate}}
						</td>
						<td>
							{{article.total}}
						</td>
					</tr>
				</tbody>
			</table>
			<div class="row">
				<div class="col-xs-9 text-right">
					Additional Charges(stones, etc):
				</div>
				<div class="col-xs-3 text-right">
					{{cart.cart.additional_charges}}
				</div>
			</div>
			<div class="row">
				<div class="col-xs-9 text-right">
					Sub Total:
				</div>
				<div class="col-xs-3 text-right">
					{{cart.sub_total}}
				</div>
			</div>
			<div ng-if="cart.cart.tax != 0">
				<div class="row">
					<div class="col-xs-9 text-right">
						Tax:
					</div>
					<div class="col-xs-3 text-right">
						{{cart.cart.tax}}
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-9 text-right">
					<b>Total:</b>
				</div>
				<div class="col-xs-3 text-right">
					<b>{{cart.total | currency:"&#8377;":2}}</b>
				</div>
			</div>
			<br>
			<br>
			<br>
			<div>
			_________________<br>
				Signature
			</div>

			<br>
			<br>
			<button class="btn btn-primary btn-lg no-print" onclick="window.close();">
				Close
			</button>

		</div>
		<script type="text/javascript">
			angular
				.module('app',['ui.bootstrap'])
				.controller("bodyController",['$scope', '$http', function($scope, $http){
					window.scope = $scope;
					window.http = $http;

					$scope.cart = JSON.parse((<%- JSON.stringify(post_data) %>).cart);
					/*

{"cart":{"additional_charges":55,"tax":1.5,"sales_articles":[{"_id":"5736d57bbec52c7837f627f7","netWeight":5.3,"grossWeight":5.2,"karat":14,"category":{"_id":"572ec3a3d05239110015523a","name":"Ring","metal":"Gold","__v":0,"image":""},"metal":"Gold","__v":0,"added":"2016-05-14T07:36:27.404Z","drawer":"Stock","wages":50,"$$hashKey":"object:32","total":12452},{"_id":"573efba26a51d0833799174a","netWeight":6,"grossWeight":6.2,"karat":24,"category":{"_id":"573efafa6a51d08337991748","name":"Toe Ring","metal":"Silver","__v":0,"image":""},"metal":"Silver","__v":0,"added":"2016-05-20T11:57:22.626Z","drawer":"Stock","wages":20,"$$hashKey":"object:18","total":2120}],"cust_name":"Prajankya","cust_contact":"7829545547","cust_address":"Saraf Bazaar, Chalisgaon"},"cartNo":"1","gold_rate":"2340","silver_rate":"350","sub_total":14627,"total":14846.405}

					*/
					$scope.lang = 'mar';
					l([{
						New:"New",
						Article:"Article",
						Todays : "Today's",
						rate : "rate",
						grossWeight : "Gross Weight",
						netWeight : "Net Weight",
						Karat  : "Karat",
						Wages  : "Wages"
					},function(){
						if(window.print){
							setTimeout(function(){
								window.print();
							},500);
						}
					}]);
			}]);
		</script>
	</body>
</html>
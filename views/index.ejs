<!DOCTYPE html>
<html ng-app="app">
	<head>
		<title>Jewellery Software</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="/stylesheets/bootstrap.min.css" rel="stylesheet"/>
		<link rel="stylesheet" href="/stylesheets/numpad.css" />
		<link href="/bower_components/bootstrap-toggle/css/bootstrap-toggle.min.css" rel="stylesheet"/>

		<script src="/javascripts/jquery-1.11.2.min.js" type="text/javascript"></script>
		<script src="/javascripts/js.cookie-2.1.1.min.js" type="text/javascript"></script>
		<script src="/bower_components/angular/angular.js"></script>
		<script src="/bower_components/angular-bootstrap/ui-bootstrap.min.js"></script>

		<script src="/bower_components/bootstrap-toggle/js/bootstrap-toggle.min.js"></script>
		<script src="/javascripts/numpad.js" type="text/javascript"></script>
		<script type="text/javascript" src="/javascripts/navbar.js"></script>
		

		<style type="text/css">
			.rates{
				cursor: pointer;
			}
			.rates.gold{
				color: #ffbc48;
			}
			.rates.silver{
				color: #39b3d7;
			}

			.rates:hover{
				background-color: #ddd;
			}
		</style>
	</head>
	<body ng-controller="bodyController">
		<navbar hide-back='true'>
			<h3>S.S.S.</h3>
		</navbar>

		<div class="container-fluid">
			<div class="jumbotron">
				<div class="row text-center">
					<div class="h1 rates gold col-xs-2 text-right">
						{{l.Gold.val}}:
					</div>
					<div class="h1 rates gold col-xs-4 text-left">
						{{gold_rate}} &#8377;/gm
					</div>
					<div class="h1 rates silver col-xs-2 text-right">
						{{l.Silver.val}}:
					</div>
					<div class="h1 rates silver col-xs-4 text-left">
						{{silver_rate}} &#8377;/gm
					</div>
				</div>
			</div>
			<div class="row text-center">
				<div class="col-xs-3">
					<button onclick="goto('add')" class="btn btn-primary btn-lg">
						{{l.New.val}} {{l.Article.val}}
					</button>
				</div>
				<div class="col-xs-3">
					<button onclick="goto('stock')" class="btn btn-primary btn-lg">
						Stock
					</button>
				</div>
				<div class="col-xs-3">
					<button onclick="goto('sales')" class="btn btn-primary btn-lg">
						Sales
					</button>
				</div>
				<div class="col-xs-3">
					<button onclick="goto('cart')" class="btn btn-primary btn-lg">
						Cart
					</button>
				</div>
				<div class="col-xs-3">
					<br>
					<button onclick="goto('settings')" class="btn btn-primary btn-lg">
						<span class="glyphicon glyphicon-cog"></span>
					</button>
				</div>
			</div>
		</div>
		<span class="hide" id="g">{{gold_rate}}</span>
		<span class="hide" id="s">{{silver_rate}}</span>

		<script type="text/javascript">
			angular
				.module('app',[
					'navbar'
				])
				.controller("bodyController",['$scope', '$http', 'navbarSrv', function($scope, $http, navbar){
					window.scope = $scope;
					window.http = $http;
					navbar.setScope($scope);
					navbar.add({
						eng: "x A sedf Test",
						mar: "ascadadf asdf"
					});
					/*l([{
						New:"New",
						Gold:"Gold",
						Silver:"Silver",
						Article:"Article",
						Todays : "Today's",
						"rate" : "rate"
					}]);*/
					
					var g_rate = Cookies.get("gold_rate");
					var s_rate = Cookies.get("silver_rate");

					$scope.gold_rate = (g_rate) ? g_rate : "00.00";
					$scope.silver_rate = (s_rate) ? s_rate : "00.00";

					$scope.$watch('gold_rate', function() {
						Cookies.set("gold_rate", $scope.gold_rate);
					});
					
					$scope.$watch('silver_rate', function() {
						Cookies.set("silver_rate", $scope.silver_rate);
					});

					$(function(){
						$(".gold").numpad({
							target : $("#g"),
							onChange : function(e, val){
								$scope.$apply(function() { 
									window.scope.gold_rate = val;
								});
							}
						});
						$(".silver").numpad({
							target : $("#s"),
							onChange : function(e, val){
								$scope.$apply(function() { 
									window.scope.silver_rate = val;
								});
							}
						});
					});
			}]);

			function goto(loc){
				window.location.href = "/"+loc;
			}
		</script>
	</body>
</html>